!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.iShare=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){function e(t,e,i){this.element=t,this.wxbox=document.createElement("div"),this.URL=e,this.settings=i,this.style=i.style,this.bgcolor=i.bgcolor,this.evenType=i.evenType||"mouseover",this.isTitleVisibility=void 0===i.isTitleVisibility||i.isTitleVisibility,this.title=i.title||"分享到微信",this.isTipVisibility=void 0===i.isTipVisibility||i.isTipVisibility,this.tip=i.tip||"“扫一扫” 即可将网页分享到朋友圈。",this.upDownFlag="",this.status=!1,this.visibility=!1,this.qrcode=null}function i(t){var e={title:document.title,url:location.href,host:location.origin||"",description:n.getmeta("description"),image:n.getimg(),WXoptions:{qrcodeW:120,qrcodeH:120,qrcodeBgc:"#fff",qrcodeFgc:"#000",bgcolor:"#2BAD13"}},i=t||window.iShare_config;if(!i)throw new Error("container property is required.");if(!i.container)throw new Error("container property is required.");if(!n.getElement(i.container))throw new Error('there is such no className|id: "'+i.container+'".');this.container=n.getElement(i.container);var o=this.container.getAttribute("data-sites"),r=o?o.split(/\s*,\s*/g):null;r&&n.validate(e.sites,r),i.config&&n.validate(e,i.config),i.config.sites&&n.validate(e.sites,i.config.sites),this.wx=null,this.defaults=e,this.dataSites=r?{sites:r}:{},this.config=i.config?i.config:{},this.settings=n.extend(e,this.config,this.dataSites),this.settings.WXoptions=n.extend(e.WXoptions,this.config.WXoptions),this.init()}var n={event:{addEvent:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},removeEvent:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},trim:function(t){return String.prototype.trim?t.trim():t.replace(/^\s+|s+$/g,"")},indexOf:function(t,e){if(!this.isArray(t))throw new Error(t.toString()+" is a non-Array！");if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i},isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},validate:function(t,e){var i,n=[];if(this.isArray(e))for(var o,r=0;o=e[r++];)this.indexOf(t,o)<0&&n.push(o);else for(i in e)i in t||n.push(i);if(0!==n.length)throw new Error("there is such no property: "+n.join(", "))},getElementTop:function(t){for(var e=t.offsetTop,i=t.offsetParent;null!==i;)e+=i.offsetTop,i=i.offsetParent;return e},getElementLeft:function(t){for(var e=t.offsetLeft,i=t.offsetParent;null!==i;)e+=i.offsetLeft,i=i.offsetParent;return e},handleParameters:function(t){var e="";for(var i in t)e=e+i+"="+encodeURIComponent(t[i])+"&";return e},extend:function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&(i[e]=arguments[t][e]);return i},each:function(t,e){if(t){for(var i,n=0,o=t.length;n<o;n++)i=e.call(t[n],n,t[n]);return i}},getElementByclassN:function(t,e){if(t){var i=[];if(!e&&document.querySelectorAll&&(i=document.querySelectorAll(t),i.length>0))return i;var n,o,r=t.split("."),s=r[0]||"*",a=r[1],c=e?e:document.body,l=c.getElementsByTagName(s),h=this;return this.each(l,function(t,e){1===e.nodeType&&(n=e.className.split(/\s+/g),o=e,h.each(n,function(t,e){e+""===a&&i.push(o)}))}),i}},getmeta:function(t){for(var e,i=document.getElementsByTagName("meta"),n=0;e=i[n++];)if(e.getAttribute("name")&&e.getAttribute("name").toLowerCase()===t)return e.content},getimg:function(){var t=this.convertToArray(document.body.getElementsByTagName("img"));if(0!==t.length)return encodeURIComponent(t[0].src)},getElement:function(t){var e;return e="#"===t.charAt(0)?document.getElementById(t):this.getElementByclassN(t)[0]},parseUrl:function(t,e){var i={};for(var n in t)i[n]=t[n].replace(/{{([A-Z]*)}}/g,function(t,i){var n=i.toLowerCase();return e[n]?encodeURIComponent(e[n]):""});return i},isWeixinBrowser:function(){var t=navigator.userAgent.toLowerCase();return!!/micromessenger/.test(t)},convertToArray:function(t){var e=null;try{e=Array.prototype.slice.call(t,0)}catch(o){e=new Array;for(var i=0,n=t.length;i<n;i++)e.push(t[i])}return e},parseClassName:function(t,e){for(var i,n=t.split(/\s+/),o=0;i=n[o++];)if(i in e)return e[i]},getWinDimension:function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&("CSS1Compat"===document.compatMode?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=document.body.clientHeight)),{pageWidth:t,pageHeight:e}},throttle:function(t,e){var i=null;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}},loadjs:function(){var t=!1,e=[];return function(i,n){var o=document.getElementsByTagName("head")[0],r=document.createElement("script"),s=document.getElementById("loaded"),a=document.dispatchEvent;e.push(n),t?n&&n():(r.setAttribute("type","text/javascript"),r.setAttribute("id","loaded"),r.setAttribute("src",i),r[a?"onload":"onreadystatechange"]=function(){if(!t&&(a||/loaded|complete/i.test(r.readyState))){t=!0;for(var i;i=e.pop();)i()}},!s&&o.appendChild(r))}}()};return e.prototype=function(){return{constructor:e,init:function(){this.render(),this.init=this.show,this.bindEvent()},render:function(){var t="",e="",i="",o="",r=this.bgcolor?this.bgcolor:"#ddd",s="";n.getWinDimension().pageHeight/2<n.getElementTop(this.element)?(e="",t="display:none;",this.upDownFlag="down",s="border-bottom-left-radius: 0;"):(e="display:none;",t="",this.upDownFlag="up",s="border-top-left-radius: 0;");var a='<div style="text-align: center;background-color: '+r+";box-shadow: 1px 1px 4px #888888;padding: 8px 8px 4px;border-radius: 4px;"+s+'">',c=this.isTitleVisibility?'<p class="tt" style="line-height: 30px;margin:0; text-shadow: 1px 1px rgba(0,0,0,0.1);font-weight: 700;margin-bottom: 4px;'+i+'">'+this.title+"</p>":"",l='<div class="qrcode" style="width:'+this.settings.qrcodeW+"px; height:"+this.settings.qrcodeH+'px; overflow:hidden;"></div>',h=this.isTipVisibility?'<p style="font-size: 12px;line-height: 20px; margin: 4px auto;width: 120px;'+o+'">'+this.tip+"</p>":"",d='<div style="'+t+"position: relative;height: 0;width: 0;border-style: solid;border-width: 12px;border-color: transparent;border-bottom-color: "+r+';border-top: none;"></div>',u='</div><div style="'+e+"position: relative;height: 0;width: 0;border-style: solid;border-width: 12px;border-color: transparent;border-top-color: "+r+';border-bottom: none;"></div>',p=d+a+c+l+h+u;this.wxbox.innerHTML=p,this.wxbox.style.cssText="position:absolute; left: -99999px;",document.body.appendChild(this.wxbox)},setLocation:function(t){var e=(this.wxbox.offsetWidth,this.wxbox.offsetHeight),i=this.element.offsetWidth,o=this.element.offsetHeight,r=n.getElementTop(this.element),s=n.getElementLeft(this.element),a="position:absolute; color: #000;z-index: 99999;";a=a+"left: "+(i/2-12+s)+"px;",a="down"===this.upDownFlag?a+"top: "+(r-e)+"px;":a+"top: "+(r+o)+"px;",this.wxbox.style.cssText=a+this.style,t&&this.hide()},bindEvent:function(){var t=this;"click"===this.evenType?n.event.addEvent(this.element,"click",function(e){var i=e||window.event;n.event.stopPropagation(i),n.event.preventDefault(i),t.visibility?t.hide():t.show()}):(n.event.addEvent(this.element,"mouseover",function(e){e||window.event;t.show()}),n.event.addEvent(this.element,"mouseout",function(e){e||window.event;t.hide()})),n.event.addEvent(window,"resize",n.throttle(function(){t.status&&t.visibility&&t.setLocation()},200))},startQR:function(){var t=this;return function(){t.qrcode||(t.qrcode=new QRCode(n.getElementByclassN(".qrcode",t.wxbox)[0],{text:t.URL,width:t.settings.qrcodeW,height:t.settings.qrcodeH,colorDark:t.settings.qrcodeFgc,colorLight:t.settings.qrcodeBgc}))}},show:function(){this.status=!0,this.wxbox.style.display="block",this.visibility=!0,this.show=function(){this.wxbox.style.display="block",this.visibility=!0}},hide:function(){this.wxbox.style.display="none",this.visibility=!1}}}(),i.prototype=function(){function t(){if(void 0!==this.container&&this.container.hasChildNodes())for(var t,i,r=this.container.childNodes,s=0;i=r[s++];)1===i.nodeType&&(t=n.parseClassName(i.className,n.parseUrl(o,this.settings)),i.className.indexOf("iShare_wechat")>-1&&!n.isWeixinBrowser()?this.wx=new e(i,this.settings.url,this.settings.WXoptions):(t&&(i.href=t),i.target="_blank"))}var o={iShare_qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary=&pics={{IMAGE}}",iShare_qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&summary={{DESCRIPTION}}&pics={{IMAGE}}&desc=&site=",iShare_tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",iShare_weibo:"http://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}",iShare_wechat:"",iShare_douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}",iShare_renren:"http://widget.renren.com/dialog/share?resourceUrl={{URL}}&title={{TITLE}}&pic={{IMAGE}}&description={{DESCRIPTION}}",iShare_youdaonote:"http://note.youdao.com/memory/?title={{TITLE}}&pic={{IMAGE}}&summary={{DESCRIPTION}}&url={{URL}}",iShare_linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{DESCRIPTION}}&armin=armin",iShare_facebook:"https://www.facebook.com/sharer/sharer.php?s=100&p[title]={{TITLE}}p[summary]={{DESCRIPTION}}&p[url]={{URL}}&p[images]={{IMAGE}}",iShare_twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}",iShare_googleplus:"https://plus.google.com/share?url={{URL}}&t={{TITLE}}",iShare_pinterest:"https://www.pinterest.com/pin/create/button/?url={{URL}}&description={{DESCRIPTION}}&media={{IMAGE}}",iShare_tumblr:"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&url={{URL}}&title={{TITLE}}"};return{constructor:i,init:function(){t.call(this),this.wx&&(this.bindEvent(),this.wx.init(),n.loadjs("qrcode.min.js",this.wx.startQR()))},bindEvent:function(){function t(){e.wx.setLocation(!0),n.event.removeEvent(e.container,"mouseover",t)}var e=this;n.event.addEvent(this.container,"mouseover",t)}}}(),window.iShare_config?new i:i});