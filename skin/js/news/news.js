var newsModel=new Vue({el:"#model-news",data:{list:[],CacheList:{},Ad:"",tabs:["全部","众筹","政策","国际","研究","创投"],CategoryMap:["0","53","54","55","56","57"],pageSize:7,currentpage:1,pagination:"",isLastPage:!1,cat:"0",Pro:"",TopNews:""},methods:{getNewsList:function(t){console.log(t),void 0==t?(headerModel.loading=!1,$("#loader").fadeIn(300)):headerModel.loading=!0;var e=void 0!==t?t:this.cat;this.$http.get(headerModel.api+"/News/GetList?token="+headerModel.token+"&category="+e+"&newkey=0&pagesize="+this.pageSize+"&currentpage="+this.currentpage).then(function(t){this.Ad=t.data,this.pagination=t.data.pagecount,this.saveCacheList(e,t.data.NewsList),this.isLastPage=this.checkLastPage(),this.$nextTick(function(){this.bannerSlider()}),headerModel.loading=!1,$("#loader").fadeOut(300)})},saveCacheList:function(t,e){void 0===this.CacheList[t]?(this.CacheList[t]={},this.CacheList[t].list=[],this.list=this.CacheList[t].list=e):this.list=this.CacheList[t].list=this.CacheList[t].list.concat(e),this.CacheList[t].curPage=this.currentpage,this.CacheList[t].pagination=this.pagination},getIntPro:function(){this.$http.get(headerModel.api+"/ZhongChou/GetList?pagesize=2&state=0&currentpage=1&token="+headerModel.token).then(function(t){this.Pro=t.data})},bannerSlider:function(){var t=$("#news-banner");t.owlCarousel({items:1,loop:!0,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!0,nav:!1})},getIntNew:function(){this.$http.get(headerModel.api+"/News/GetTopRecommend?count=10&categoryid=0").then(function(t){this.TopNews=t.data})},timeFormart:function(t){var e=new Date(t);return DGDTOOLS.fT._convertTime(e)},tabFn:function(t,e){var a=this;a.cat=t,$(a.$refs["tab-btns"]).eq(e).addClass("cur").siblings().removeClass("cur"),a.CacheList[a.cat]?(a.list=a.CacheList[a.cat].list,a.currentpage=a.CacheList[a.cat].curPage,a.pagination=a.CacheList[a.cat].pagination):(a.currentpage=1,a.getNewsList(a.cat)),this.isLastPage=this.checkLastPage()},checkLastPage:function(){return this.pagination==this.currentpage},loadMore:function(){var t=this;return this.checkLastPage()?void(this.isLastPage=!0):(this.currentpage++,void this.getNewsList(t.cat))},resizeImg:function(t,e,a){if(t)var i=t.split("@")[0]+"@1e_1c_0o_0l_"+a+"h_"+e+"w_90q.src";return i},newZan:function(t,e){if(!$(this.$refs.iconZan).eq(t).parent("span").hasClass("icon-zaned")){headerModel.loading=!0;var a=this;this.$http.get(headerModel.api+"/News/ClickLike?newsid="+e).then(function(e){200==e.data.resultid&&(a.list[t].Pageviews++,$(a.$refs.iconZan).eq(t).parent("span").addClass("icon-zaned"),$(this.$refs.iconZan).eq(t).css("cursor","not-allowed")),headerModel.loading=!1})}}},created:function(){this.getIntPro(),this.getNewsList(),this.getIntNew()}});