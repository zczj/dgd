Vue.config.devtools=!0;var passportModel=new Vue({el:".passport-common",data:{sms:"发送",sended:!1,error:!1,errorMsg:"",delay:5e3,verify:!1},methods:{verifyTel:function(e){var t=/^1(3|4|5|7|8)\d{9}$/;return t.test(e)},verifyEmail:function(e){var t=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;return t.test(e)},verifyImage:function(e){var t=/^[a-zA-Z0-9]{4}$/;return t.test(e)},verifySMS:function(e){var t=/^\d{6}$/;return t.test(e)},passwordLength:function(e){var t=/^.{6,20}$/;return t.test(e)},cancelNotice:function(){var e=this;setTimeout(function(){e.error=!1},e.delay)},errorFn:function(e){this.errorMsg=e,this.error=!0,this.cancelNotice()},getVerify:function(e){var t=e.$refs.verifyImage;t.src="http://www.dgd.vc/Passport/VerifyImage?r="+Math.random()},getImageVerify:function(){$.ajax({url:"/passport/IsRightValidateCode",type:"POST",data:{code:"1234"},success:function(e){console.log(e)}})},countdown:function(){var e=20,t=null,r=this;this.sms='重新发送(<em style="color:red;font-style:normal;">'+e+"</em>)s",this.sended=!0,t=setInterval(function(){return e--,e<=0?(clearInterval(t),r.sended=!1,void(r.sms="重新发送")):void(r.sms='重新发送(<em style="color:red;font-style:normal;">'+e+"</em>)s")},1e3)},getSMSVerify:function(e){var t=headerModel.api+"/Passport/SendPhoneCode?phone="+e+"&t=getpwd";this.$http.get(t).then(function(e){200==e.data.resultid?(this.countdown(),$.dialog({type:"ok",message:"发送成功！",delay:2e3,effect:!0})):this.errorFn(e.message)})},sendSMS:function(e){var t=e.$refs.telPhoneNum,r=e.$refs.imageVerify;return""!==t.value&&this.verifyTel(t.value)?!r||""!=r.value&&this.verifyImage(r.value)?void(this.sended||this.getSMSVerify(t.value)):(this.errorFn("请填写正确的图形验证码"),r.focus(),void r.select()):(this.errorFn("请填写正确的手机号码"),t.focus(),void t.select())}}});