var loginModel=new Vue({el:"#login",name:"login",data:{formShow:!1,checkName:!1},methods:{login:function(){var s=this,e=this.$refs.account,r=this.$refs.password;return $(e).removeClass("success error"),$(r).removeClass("success error"),console.log(this.checkName),""===e.value?(passportModel.errorFn("账号不能为空"),$(e).removeClass("success error").addClass("error"),e.focus(),e.select(),!1):($(e).removeClass("success error").addClass("success"),""!==r.value&&passportModel.passwordLength(r.value)?(headerModel.loading=!0,void $.ajax({url:headerModel.api+"/Passport/Login",data:{Account:e.value,Password:$.md5($.md5(r.value))},type:"post",success:function(o){o&&($("#loader").fadeOut(300),200!==o.resultid?(headerModel.loading=!1,passportModel.errorFn(o.message),$(e).removeClass("success error").addClass("error"),$(r).removeClass("success error").addClass("error"),e.focus(),e.select()):200===o.resultid&&(DGDTOOLS.store.save("userInfo",o),s.successFn(),headerModel.loading=!1))},error:function(s){$.dialog({type:"ok",message:s.status+" "+s.statusText,delay:1e3,effect:!0})}})):(passportModel.errorFn("请填写正确的密码"),$(r).removeClass("success error").addClass("error"),r.focus(),r.select(),!1))},loginBySMS:function(){var s=headerModel.api+"/Passport/ValidatePhoneCode",e=this.$refs.telPhoneNum,r=this.$refs.imageVerify,o=this.$refs.SMSVerify,a=this;return""!==e.value&&passportModel.verifyTel(e.value)?($(e).removeClass("success error").addClass("success"),""!==r.value&&passportModel.verifyImage(r.value)?($(r).removeClass("success error").addClass("success"),""!==o.value&&passportModel.verifySMS(o.value)?($(o).removeClass("success error").addClass("success"),passportModel.getImageVerify(this,!0),!!passportModel.isImageVerify&&void $.ajax({url:s,type:"POST",data:{Phone:e.value,Code:o.value},success:function(s){return 200!==s.resultid?(passportModel.errorFn(s.message),o.select(),$(o).removeClass("success error").addClass("error"),!1):void a.successFn()},error:function(s){$.dialog({type:"ok",message:s.status+" "+s.statusText,delay:1e3,effect:!0})}})):(passportModel.errorFn("短信验证码格式不正确"),o.focus(),o.select(),$(o).removeClass("success error").addClass("error"),!1)):(passportModel.errorFn("图形验证码格式不正确"),r.focus(),r.select(),$(r).removeClass("success error").addClass("error"),!1)):(passportModel.errorFn("请填写正确的手机号码"),e.focus(),e.select(),$(e).removeClass("success error").addClass("error"),!1)},successFn:function(){window.location.href=window.location.search.split("url=")[1]||""},toggle:function(){this.formShow=!this.formShow}},mounted:function(){$("#loader").fadeOut("300"),this.$refs.account.focus()}});