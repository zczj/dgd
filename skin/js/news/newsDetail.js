"use strict";var newsModel=new Vue({el:"#model-newsDetail",data:{newsData:"",newsId:"",Pro:"",TopNews:"",Sm:!1,webShare:!1,webShareWx:!1,comment:"",comTxt:""},methods:{getNews:function(){$("#loader").fadeIn(300),this.$http.get(headerModel.api+"/News/GetNews/"+this.newsId+"?token="+headerModel.token).then(function(e){e.data&&(e.data.message?console.log(e.data.message):(this.newsData=e.data,DGDTOOLS.Ev._btnCs())),$("#loader").fadeOut(300)})},collection:function(){var e=this,t=e.newsData.newsinfo.IsCollect?0:1;return headerModel.isLogin?($("#loader").fadeIn(300),void $.ajax({url:headerModel.api+"/MyCenter/AddCollection",data:{token:headerModel.token,Object:1,ObjectID:e.newsData.newsinfo.NewsID,Title:e.newsData.newsinfo.newtitle,Remark:"",Type:t},type:"post",success:function(t){$("#loader").fadeOut(300),200==t.resultid?e.newsData.newsinfo.IsCollect=!e.newsData.newsinfo.IsCollect:t.message&&console.error(t.message)},error:function(){$("#loader").fadeOut(300)}})):void DGDTOOLS.check._isLogin()},formartDate:function(e){return DGDTOOLS.fT._covnerTimeLine(e)},formartKeyWords:function(e){var t=[];return t=e.split("；")},getIntPro:function(){$("#loader").fadeIn(300),this.$http.get(headerModel.api+"/ZhongChou/GetList?pagesize=2&state=0&currentpage=1&token="+headerModel.token).then(function(e){this.Pro=e.data,$("#loader").fadeOut(300)})},getIntNew:function(){this.$http.get(headerModel.api+"/News/GetTopRecommend?count=10&categoryid=0").then(function(e){this.TopNews=e.data})},timeFormart:function(e){var t=new Date(e);return DGDTOOLS.fT._convertTime(t)},wechat:function(){if(DGDTOOLS.check._isWeixin())this.webShareWx=!0;else{this.webShare=!0;var e=new DGDTOOLS.Ev._loadJS("/skin/js/project/qrcode.min.js");if(null==e)return void setTimeout(function(){DGDTOOLS.Ev._createQrcode(document.querySelector("#canvas"))},40);e.onload=function(){DGDTOOLS.Ev._createQrcode(document.querySelector("#canvas"))}}},getComment:function(){$("#loader").fadeIn(300),this.$http.get(headerModel.api+"/News/GetComment?ObjectID=news_"+this.newsId).then(function(e){e.data&&(this.comment=e.data),$("#loader").fadeOut(300)})},postComment:function(){var e=this;return e.comTxt=e.$refs.comTxt.value,headerModel.isLogin?(""==this.comTxt&&DGDTOOLS.tip._tip("请说两句。。。",function(){e.$refs.comTxt.focus()}),void $.ajax({url:headerModel.api+"/News/AddComm",data:{token:headerModel.token,newsid:this.newsId,Content:this.comTxt,ParentID:0,CommentType:"news_"},type:"post",success:function(e){200==e.resultid?DGDTOOLS.tip._tip(e.message,function(){console.log(e)}):DGDTOOLS.tip._tip(e.message)},error:function(e){DGDTOOLS.tip._tip(e.status+":接口异常"),console.error(e.status+":"+e.responseText)}})):void DGDTOOLS.check._isLogin()}},mounted:function(){this.newsId=window.location.search.split("id=")[1]||0,this.getNews(),this.getIntPro(),this.getIntNew(),this.getComment(),window.onload=function(){DGDTOOLS.Ev._share(".item-share")}}});