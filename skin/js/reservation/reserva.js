var reservaModel=new Vue({el:"#model-reserva",data:{proId:"",buyInfo:"",part:1,amount:0,formLock:!1,readyRule:!0,TimesRotation:["种子期","天使期","pre-A轮","A轮","B轮","C轮"]},methods:{getBuyInfo:function(){var o=this;return headerModel.isLogin?($("#loader").fadeIn(300),void $.ajax({url:headerModel.api+"/Buy/BuyInfo",data:{id:o.proId,token:headerModel.token},type:"post",success:function(e){$("#loader").fadeOut(300),200==e.resultid?(o.buyInfo=e,o.amount=e.project.OriginalLowVote):console.log(e.message)},error:function(o){console.error(o.status+":"+o.responseText)}})):void DGDTOOLS.check._isLogin()},partAdd:function(){this.part++},partCut:function(){1!=this.part&&this.part--},partCh:function(){var o=this;(""==o.part||o.part<=0)&&(o.part=1,DGDTOOLS.tip._tip("最低1份起投",function(){o.$refs.part.focus()}))},nextFn:function(){var o=this;return o.readyRule?(headerModel.loading=!0,void(o.formLock||(o.formLock=!0,$.ajax({url:headerModel.api+"/Buy/Reservation",data:{num:o.part,projectid:o.proId,token:headerModel.token},type:"post",success:function(e){o.formLock=!1,headerModel.loading=!1,200==e.resultid?DGDTOOLS.tip._tip("预约成功!!!",function(){window.location.href="complete?proId="+o.proId}):DGDTOOLS.tip._tip(e.message)},error:function(e){o.formLock=!1,headerModel.loading=!1,DGDTOOLS.tip._tip(e.status+":接口异常"),console.error(e.status+":"+e.responseText)}})))):void DGDTOOLS.tip._tip("请阅读并同意")}},mounted:function(){this.proId=window.location.search.split("id=")[1]||0,0==this.proId&&(window.location.href="../project/index.html"),this.getBuyInfo()}});